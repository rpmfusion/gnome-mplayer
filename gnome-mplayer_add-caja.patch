Index: src/caja_property_page.c
===================================================================
--- src/caja_property_page.c	(wersja 0)
+++ src/caja_property_page.c	(wersja 2475)
@@ -0,0 +1,153 @@
+/*
+ * caja_property_page.c
+ * Copyright (C) Kevin DeKorte 2009 <kdekorte@gmail.com>
+ * 
+ * caja_property_page.c is free software.
+ * 
+ * You may redistribute it and/or modify it under the terms of the
+ * GNU General Public License, as published by the Free Software
+ * Foundation; either version 2 of the License, or (at your option)
+ * any later version.
+ * 
+ * caja_property_page.c is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with playlist.c.  If not, write to:
+ * 	The Free Software Foundation, Inc.,
+ * 	51 Franklin Street, Fifth Floor
+ * 	Boston, MA  02110-1301, USA.
+ */
+
+#ifdef HAVE_CONFIG_H
+#include <config.h>
+#endif
+#include "mime_types.h"
+#include <libcaja-extension/caja-extension-types.h>
+#include <libcaja-extension/caja-property-page-provider.h>
+#include <gtk/gtk.h>
+#include <gdk/gdk.h>
+#include <glib.h>
+#include <glib/gstdio.h>
+#include <glib/gi18n.h>
+#include <gmlib.h>
+#include "property_page_common.h"
+
+#define ENABLE_CAJA_PLUGIN "enable-nautilus-plugin"
+#define VERBOSE					"verbose"
+
+gint verbose;
+
+static GType pp_type = 0;
+
+
+
+
+
+static GList *gnome_mplayer_properties_get_pages(CajaPropertyPageProvider * provider, GList * files)
+{
+    GList *pages = NULL;
+    CajaFileInfo *file;
+    GtkWidget *page, *label;
+    CajaPropertyPage *property_page;
+    guint i;
+    gboolean found = FALSE;
+    gchar *uri;
+
+    /* only add properties page if a single file is selected */
+    if (files == NULL || files->next != NULL)
+        return pages;
+
+    file = files->data;
+
+    /* only add the properties page to these mime types */
+    for (i = 0; i < G_N_ELEMENTS(mime_types); i++) {
+        if (caja_file_info_is_mime_type(file, mime_types[i])) {
+            found = TRUE;
+            break;
+        }
+    }
+
+    if (found) {
+        uri = caja_file_info_get_uri(file);
+        label = gtk_label_new(dgettext(GETTEXT_PACKAGE, "Audio/Video"));
+        page = gtk_table_new(20, 2, FALSE);
+        gtk_container_set_border_width(GTK_CONTAINER(page), 6);
+        if (get_properties(page, uri)) {
+            gtk_widget_show_all(page);
+            property_page = caja_property_page_new("video-properties", label, page);
+            pages = g_list_prepend(pages, property_page);
+        }
+        g_free(uri);
+    }
+    return pages;
+}
+
+static void property_page_provider_iface_init(CajaPropertyPageProviderIface * iface)
+{
+    iface->get_pages = gnome_mplayer_properties_get_pages;
+}
+
+static void gnome_mplayer_properties_plugin_register_type(GTypeModule * module)
+{
+    const GTypeInfo info = {
+        sizeof(GObjectClass),
+        (GBaseInitFunc) NULL,
+        (GBaseFinalizeFunc) NULL,
+        (GClassInitFunc) NULL,
+        NULL,
+        NULL,
+        sizeof(GObject),
+        0,
+        (GInstanceInitFunc) NULL
+    };
+    const GInterfaceInfo property_page_provider_iface_info = {
+        (GInterfaceInitFunc) property_page_provider_iface_init,
+        NULL,
+        NULL
+    };
+
+    pp_type = g_type_module_register_type(module, G_TYPE_OBJECT, "GnomeMPlayerPropertiesPlugin", &info, 0);
+    g_type_module_add_interface(module, pp_type, CAJA_TYPE_PROPERTY_PAGE_PROVIDER, &property_page_provider_iface_info);
+}
+
+
+
+
+/* --- extension interface --- */
+void caja_module_initialize(GTypeModule * module)
+{
+    GmPrefStore *gm_store;
+
+#ifdef ENABLE_NLS
+    bindtextdomain(GETTEXT_PACKAGE, PACKAGE_LOCALE_DIR);
+    bind_textdomain_codeset(GETTEXT_PACKAGE, "UTF-8");
+    // specify the domain in the translation calls so
+    // we don't mess up the translation of the other tabs
+    // textdomain(GETTEXT_PACKAGE);
+#endif
+
+    verbose = 0;
+
+    gm_store = gm_pref_store_new("gnome-mplayer");
+    if (gm_pref_store_get_boolean_with_default(gm_store, ENABLE_CAJA_PLUGIN, TRUE)) {
+        verbose = gm_pref_store_get_int(gm_store, VERBOSE);
+        gnome_mplayer_properties_plugin_register_type(module);
+    }
+    gm_pref_store_free(gm_store);
+}
+
+void caja_module_shutdown(void)
+{
+}
+
+void caja_module_list_types(const GType ** types, int *num_types)
+{
+    static GType type_list[1];
+
+    type_list[0] = pp_type;
+    *types = type_list;
+    *num_types = G_N_ELEMENTS(type_list);
+}
Index: src/Makefile.am
===================================================================
--- src/Makefile.am	(wersja 2474)
+++ src/Makefile.am	(wersja 2475)
@@ -144,7 +144,34 @@
 
 endif #HAVE_NEMO
 
+if HAVE_CAJA
 
+cajadir = $(CAJADIR)
+caja_PROGRAMS = libgnome-mplayer-caja-properties-page.so
+
+libgnome_mplayer_caja_properties_page_so_SOURCES = \
+    ../config.h \
+    mime_types.h \
+    caja_property_page.c \
+    property_page_common.c \
+    property_page_common.h
+
+libgnome_mplayer_caja_properties_page_so_CFLAGS = -fPIC \
+    $(CAJA_CFLAGS) \
+	$(GTK_CFLAGS) \
+    $(GIO_CFLAGS) \
+    $(AM_CFLAGS)
+    
+libgnome_mplayer_caja_properties_page_so_LDFLAGS = -shared
+
+libgnome_mplayer_caja_properties_page_so_LDADD = \
+	$(CAJA_LIBS) \
+	$(GTK_LIBS) \
+	$(GMLIB_LIBS) \
+	$(GIO_LIBS)
+
+endif #HAVE_CAJA
+
 EXTRA_DIST = 
 	
 indent:
Index: configure.in
===================================================================
--- configure.in	(wersja 2474)
+++ configure.in	(wersja 2475)
@@ -306,6 +306,29 @@
 fi
 AM_CONDITIONAL(HAVE_NEMO, test x$HAVE_NEMO = "xyes")
 
+AC_ARG_ENABLE(caja,
+        AC_HELP_STRING([--enable-caja],[compile the caja plugin]),
+        [case "${enableval}" in
+        yes) ENABLE_CAJA=yes ;;
+        no) ENABLE_CAJA=no ;;
+        *) AC_MSG_ERROR(bad value ${enableval} for --enable-nautilus) ;;
+        esac],
+        [ENABLE_CAJA=yes]) dnl Default value
+
+if test x$ENABLE_CAJA = "xyes" ; then
+        PKG_CHECK_MODULES(CAJA, libcaja-extension,
+                        [HAVE_CAJA=yes], [HAVE_CAJA=no])
+fi
+
+AC_SUBST(CAJA_CFLAGS)
+AC_SUBST(CAJA_LIBS)
+if test x$HAVE_CAJA = "xyes"; then
+        AC_DEFINE(HAVE_CAJA, 1, [defined if you build the caja plugin])
+        CAJADIR=`pkg-config --variable=extensiondir libcaja-extension`
+        AC_SUBST(CAJADIR)
+fi
+AM_CONDITIONAL(HAVE_CAJA, test x$HAVE_CAJA = "xyes")
+
 AC_ARG_ENABLE(gseal,
 		AC_HELP_STRING([--enable-gseal],[Enable flag for testing]),
         [case "${enableval}" in
Index: ChangeLog
===================================================================
--- ChangeLog	(wersja 2474)
+++ ChangeLog	(wersja 2475)
@@ -1,4 +1,5 @@
 Development
+    Add caja patch
 1.0.9
     Fix storing of disable fetch cover art preference
     Work on fixing fullscreen mode hanging when control menu goes thru show/hide sequence
Index: configure
===================================================================
--- configure	(wersja 2476)
+++ configure	(kopia robocza)
@@ -633,6 +633,11 @@
 GLIB_COMPILE_SCHEMAS
 gsettingsschemadir
 GSETTINGS_DISABLE_SCHEMAS_COMPILE
+HAVE_CAJA_FALSE
+HAVE_CAJA_TRUE
+CAJADIR
+CAJA_LIBS
+CAJA_CFLAGS
 HAVE_NEMO_FALSE
 HAVE_NEMO_TRUE
 NEMODIR
@@ -847,6 +852,7 @@
 with_libmusicbrainz3
 enable_nautilus
 enable_nemo
+enable_caja
 enable_gseal
 enable_schemas_compile
 with_gconf_source
@@ -921,7 +927,9 @@
 NAUTILUS_CFLAGS
 NAUTILUS_LIBS
 NEMO_CFLAGS
-NEMO_LIBS'
+NEMO_LIBS
+CAJA_CFLAGS
+CAJA_LIBS'
 
 
 # Initialize some variables set by options.
@@ -1546,6 +1554,7 @@
   --enable-gtk3           compile using GTK3
   --enable-nautilus       compile the nautilus plugin
   --enable-nemo           compile the nemo plugin
+  --enable-caja           compile the caja plugin
   --enable-gseal          Enable flag for testing
   --disable-schemas-compile
                           Disable regeneration of gschemas.compiled on install
@@ -1672,6 +1681,8 @@
               linker flags for NAUTILUS, overriding pkg-config
   NEMO_CFLAGS C compiler flags for NEMO, overriding pkg-config
   NEMO_LIBS   linker flags for NEMO, overriding pkg-config
+  CAJA_CFLAGS C compiler flags for CAJA, overriding pkg-config
+  CAJA_LIBS   linker flags for CAJA, overriding pkg-config
 
 Use these variables to override the choices made by `configure' or to help
 it to find libraries and programs with nonstandard names/locations.
@@ -10140,6 +10151,109 @@
 fi
 
 
+# Check whether --enable-caja was given.
+if test "${enable_caja+set}" = set; then :
+  enableval=$enable_caja; case "${enableval}" in
+        yes) ENABLE_CAJA=yes ;;
+        no) ENABLE_CAJA=no ;;
+        *) as_fn_error $? "bad value ${enableval} for --enable-nautilus" "$LINENO" 5 ;;
+        esac
+else
+  ENABLE_CAJA=yes
+fi
+
+if test x$ENABLE_CAJA = "xyes" ; then
+
+pkg_failed=no
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for CAJA" >&5
+$as_echo_n "checking for CAJA... " >&6; }
+
+if test -n "$CAJA_CFLAGS"; then
+    pkg_cv_CAJA_CFLAGS="$CAJA_CFLAGS"
+ elif test -n "$PKG_CONFIG"; then
+    if test -n "$PKG_CONFIG" && \
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libcaja-extension\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "libcaja-extension") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; then
+  pkg_cv_CAJA_CFLAGS=`$PKG_CONFIG --cflags "libcaja-extension" 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
+else
+  pkg_failed=yes
+fi
+ else
+    pkg_failed=untried
+fi
+if test -n "$CAJA_LIBS"; then
+    pkg_cv_CAJA_LIBS="$CAJA_LIBS"
+ elif test -n "$PKG_CONFIG"; then
+    if test -n "$PKG_CONFIG" && \
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libcaja-extension\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "libcaja-extension") 2>&5
+  ac_status=$?
+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; then
+  pkg_cv_CAJA_LIBS=`$PKG_CONFIG --libs "libcaja-extension" 2>/dev/null`
+		      test "x$?" != "x0" && pkg_failed=yes
+else
+  pkg_failed=yes
+fi
+ else
+    pkg_failed=untried
+fi
+
+
+
+if test $pkg_failed = yes; then
+   	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+
+if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
+        _pkg_short_errors_supported=yes
+else
+        _pkg_short_errors_supported=no
+fi
+        if test $_pkg_short_errors_supported = yes; then
+	        CAJA_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "libcaja-extension" 2>&1`
+        else
+	        CAJA_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "libcaja-extension" 2>&1`
+        fi
+	# Put the nasty error message in config.log where it belongs
+	echo "$CAJA_PKG_ERRORS" >&5
+
+	HAVE_CAJA=no
+elif test $pkg_failed = untried; then
+     	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+	HAVE_CAJA=no
+else
+	CAJA_CFLAGS=$pkg_cv_CAJA_CFLAGS
+	CAJA_LIBS=$pkg_cv_CAJA_LIBS
+        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+$as_echo "yes" >&6; }
+	HAVE_CAJA=yes
+fi
+fi
+
+
+
+if test x$HAVE_CAJA = "xyes"; then
+
+$as_echo "#define HAVE_CAJA 1" >>confdefs.h
+
+        CAJADIR=`pkg-config --variable=extensiondir libcaja-extension`
+
+fi
+ if test x$HAVE_CAJA = "xyes"; then
+  HAVE_CAJA_TRUE=
+  HAVE_CAJA_FALSE='#'
+else
+  HAVE_CAJA_TRUE='#'
+  HAVE_CAJA_FALSE=
+fi
+
+
 # Check whether --enable-gseal was given.
 if test "${enable_gseal+set}" = set; then :
   enableval=$enable_gseal; case "${enableval}" in
@@ -10695,6 +10809,10 @@
   as_fn_error $? "conditional \"HAVE_NEMO\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
+if test -z "${HAVE_CAJA_TRUE}" && test -z "${HAVE_CAJA_FALSE}"; then
+  as_fn_error $? "conditional \"HAVE_CAJA\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
 if test -z "${GCONF_SCHEMAS_INSTALL_TRUE}" && test -z "${GCONF_SCHEMAS_INSTALL_FALSE}"; then
   as_fn_error $? "conditional \"GCONF_SCHEMAS_INSTALL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
Index: src/Makefile.in
===================================================================
--- src/Makefile.in	(wersja 2476)
+++ src/Makefile.in	(kopia robocza)
@@ -79,6 +79,7 @@
 bin_PROGRAMS = gnome-mplayer$(EXEEXT)
 @HAVE_NAUTILUS_TRUE@nautilus_PROGRAMS = libgnome-mplayer-properties-page.so$(EXEEXT)
 @HAVE_NEMO_TRUE@nemo_PROGRAMS = libgnome-mplayer-nemo-properties-page.so$(EXEEXT)
+@HAVE_CAJA_TRUE@caja_PROGRAMS = libgnome-mplayer-caja-properties-page.so$(EXEEXT)
 subdir = src
 DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \
 	$(top_srcdir)/mkinstalldirs $(top_srcdir)/depcomp
@@ -90,9 +91,10 @@
 CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
-am__installdirs = "$(DESTDIR)$(bindir)" "$(DESTDIR)$(nautilusdir)" \
-	"$(DESTDIR)$(nemodir)"
-PROGRAMS = $(bin_PROGRAMS) $(nautilus_PROGRAMS) $(nemo_PROGRAMS)
+am__installdirs = "$(DESTDIR)$(bindir)" "$(DESTDIR)$(cajadir)" \
+	"$(DESTDIR)$(nautilusdir)" "$(DESTDIR)$(nemodir)"
+PROGRAMS = $(bin_PROGRAMS) $(caja_PROGRAMS) $(nautilus_PROGRAMS) \
+	$(nemo_PROGRAMS)
 am_gnome_mplayer_OBJECTS = gui.$(OBJEXT) playlist.$(OBJEXT) \
 	support.$(OBJEXT) mntent_compat.$(OBJEXT) main.$(OBJEXT) \
 	dbus-interface.$(OBJEXT) mpris-interface.$(OBJEXT) \
@@ -108,6 +110,20 @@
 	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
 gnome_mplayer_LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(gnome_mplayer_LDFLAGS) $(LDFLAGS) -o $@
+am__libgnome_mplayer_caja_properties_page_so_SOURCES_DIST =  \
+	../config.h mime_types.h caja_property_page.c \
+	property_page_common.c property_page_common.h
+@HAVE_CAJA_TRUE@am_libgnome_mplayer_caja_properties_page_so_OBJECTS = libgnome_mplayer_caja_properties_page_so-caja_property_page.$(OBJEXT) \
+@HAVE_CAJA_TRUE@	libgnome_mplayer_caja_properties_page_so-property_page_common.$(OBJEXT)
+libgnome_mplayer_caja_properties_page_so_OBJECTS =  \
+	$(am_libgnome_mplayer_caja_properties_page_so_OBJECTS)
+@HAVE_CAJA_TRUE@libgnome_mplayer_caja_properties_page_so_DEPENDENCIES =  \
+@HAVE_CAJA_TRUE@	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1) \
+@HAVE_CAJA_TRUE@	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
+libgnome_mplayer_caja_properties_page_so_LINK = $(CCLD) \
+	$(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) \
+	$(libgnome_mplayer_caja_properties_page_so_LDFLAGS) $(LDFLAGS) \
+	-o $@
 am__libgnome_mplayer_nemo_properties_page_so_SOURCES_DIST =  \
 	../config.h mime_types.h nemo_property_page.c \
 	property_page_common.c property_page_common.h
@@ -171,9 +187,11 @@
 am__v_CCLD_0 = @echo "  CCLD    " $@;
 am__v_CCLD_1 = 
 SOURCES = $(gnome_mplayer_SOURCES) \
+	$(libgnome_mplayer_caja_properties_page_so_SOURCES) \
 	$(libgnome_mplayer_nemo_properties_page_so_SOURCES) \
 	$(libgnome_mplayer_properties_page_so_SOURCES)
 DIST_SOURCES = $(gnome_mplayer_SOURCES) \
+	$(am__libgnome_mplayer_caja_properties_page_so_SOURCES_DIST) \
 	$(am__libgnome_mplayer_nemo_properties_page_so_SOURCES_DIST) \
 	$(am__libgnome_mplayer_properties_page_so_SOURCES_DIST)
 RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \
@@ -254,6 +272,9 @@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
+CAJADIR = @CAJADIR@
+CAJA_CFLAGS = @CAJA_CFLAGS@
+CAJA_LIBS = @CAJA_LIBS@
 CATALOGS = @CATALOGS@
 CATOBJEXT = @CATOBJEXT@
 CC = @CC@
@@ -561,6 +582,27 @@
 @HAVE_NEMO_TRUE@	$(GMLIB_LIBS) \
 @HAVE_NEMO_TRUE@	$(GIO_LIBS)
 
+@HAVE_CAJA_TRUE@cajadir = $(CAJADIR)
+@HAVE_CAJA_TRUE@libgnome_mplayer_caja_properties_page_so_SOURCES = \
+@HAVE_CAJA_TRUE@    ../config.h \
+@HAVE_CAJA_TRUE@    mime_types.h \
+@HAVE_CAJA_TRUE@    caja_property_page.c \
+@HAVE_CAJA_TRUE@    property_page_common.c \
+@HAVE_CAJA_TRUE@    property_page_common.h
+
+@HAVE_CAJA_TRUE@libgnome_mplayer_caja_properties_page_so_CFLAGS = -fPIC \
+@HAVE_CAJA_TRUE@    $(CAJA_CFLAGS) \
+@HAVE_CAJA_TRUE@	$(GTK_CFLAGS) \
+@HAVE_CAJA_TRUE@    $(GIO_CFLAGS) \
+@HAVE_CAJA_TRUE@    $(AM_CFLAGS)
+
+@HAVE_CAJA_TRUE@libgnome_mplayer_caja_properties_page_so_LDFLAGS = -shared
+@HAVE_CAJA_TRUE@libgnome_mplayer_caja_properties_page_so_LDADD = \
+@HAVE_CAJA_TRUE@	$(CAJA_LIBS) \
+@HAVE_CAJA_TRUE@	$(GTK_LIBS) \
+@HAVE_CAJA_TRUE@	$(GMLIB_LIBS) \
+@HAVE_CAJA_TRUE@	$(GIO_LIBS)
+
 EXTRA_DIST = 
 all: all-recursive
 
@@ -638,6 +680,48 @@
 
 clean-binPROGRAMS:
 	-test -z "$(bin_PROGRAMS)" || rm -f $(bin_PROGRAMS)
+install-cajaPROGRAMS: $(caja_PROGRAMS)
+	@$(NORMAL_INSTALL)
+	@list='$(caja_PROGRAMS)'; test -n "$(cajadir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(cajadir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(cajadir)" || exit 1; \
+	fi; \
+	for p in $$list; do echo "$$p $$p"; done | \
+	sed 's/$(EXEEXT)$$//' | \
+	while read p p1; do if test -f $$p \
+	  ; then echo "$$p"; echo "$$p"; else :; fi; \
+	done | \
+	sed -e 'p;s,.*/,,;n;h' \
+	    -e 's|.*|.|' \
+	    -e 'p;x;s,.*/,,;s/$(EXEEXT)$$//;$(transform);s/$$/$(EXEEXT)/' | \
+	sed 'N;N;N;s,\n, ,g' | \
+	$(AWK) 'BEGIN { files["."] = ""; dirs["."] = 1 } \
+	  { d=$$3; if (dirs[d] != 1) { print "d", d; dirs[d] = 1 } \
+	    if ($$2 == $$4) files[d] = files[d] " " $$1; \
+	    else { print "f", $$3 "/" $$4, $$1; } } \
+	  END { for (d in files) print "f", d, files[d] }' | \
+	while read type dir files; do \
+	    if test "$$dir" = .; then dir=; else dir=/$$dir; fi; \
+	    test -z "$$files" || { \
+	      echo " $(INSTALL_PROGRAM_ENV) $(INSTALL_PROGRAM) $$files '$(DESTDIR)$(cajadir)$$dir'"; \
+	      $(INSTALL_PROGRAM_ENV) $(INSTALL_PROGRAM) $$files "$(DESTDIR)$(cajadir)$$dir" || exit $$?; \
+	    } \
+	; done
+
+uninstall-cajaPROGRAMS:
+	@$(NORMAL_UNINSTALL)
+	@list='$(caja_PROGRAMS)'; test -n "$(cajadir)" || list=; \
+	files=`for p in $$list; do echo "$$p"; done | \
+	  sed -e 'h;s,^.*/,,;s/$(EXEEXT)$$//;$(transform)' \
+	      -e 's/$$/$(EXEEXT)/' \
+	`; \
+	test -n "$$list" || exit 0; \
+	echo " ( cd '$(DESTDIR)$(cajadir)' && rm -f" $$files ")"; \
+	cd "$(DESTDIR)$(cajadir)" && rm -f $$files
+
+clean-cajaPROGRAMS:
+	-test -z "$(caja_PROGRAMS)" || rm -f $(caja_PROGRAMS)
 install-nautilusPROGRAMS: $(nautilus_PROGRAMS)
 	@$(NORMAL_INSTALL)
 	@list='$(nautilus_PROGRAMS)'; test -n "$(nautilusdir)" || list=; \
@@ -727,6 +811,10 @@
 	@rm -f gnome-mplayer$(EXEEXT)
 	$(AM_V_CCLD)$(gnome_mplayer_LINK) $(gnome_mplayer_OBJECTS) $(gnome_mplayer_LDADD) $(LIBS)
 
+libgnome-mplayer-caja-properties-page.so$(EXEEXT): $(libgnome_mplayer_caja_properties_page_so_OBJECTS) $(libgnome_mplayer_caja_properties_page_so_DEPENDENCIES) $(EXTRA_libgnome_mplayer_caja_properties_page_so_DEPENDENCIES) 
+	@rm -f libgnome-mplayer-caja-properties-page.so$(EXEEXT)
+	$(AM_V_CCLD)$(libgnome_mplayer_caja_properties_page_so_LINK) $(libgnome_mplayer_caja_properties_page_so_OBJECTS) $(libgnome_mplayer_caja_properties_page_so_LDADD) $(LIBS)
+
 libgnome-mplayer-nemo-properties-page.so$(EXEEXT): $(libgnome_mplayer_nemo_properties_page_so_OBJECTS) $(libgnome_mplayer_nemo_properties_page_so_DEPENDENCIES) $(EXTRA_libgnome_mplayer_nemo_properties_page_so_DEPENDENCIES) 
 	@rm -f libgnome-mplayer-nemo-properties-page.so$(EXEEXT)
 	$(AM_V_CCLD)$(libgnome_mplayer_nemo_properties_page_so_LINK) $(libgnome_mplayer_nemo_properties_page_so_OBJECTS) $(libgnome_mplayer_nemo_properties_page_so_LDADD) $(LIBS)
@@ -744,6 +832,8 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/database.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dbus-interface.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gui.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgnome_mplayer_nemo_properties_page_so-nemo_property_page.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgnome_mplayer_nemo_properties_page_so-property_page_common.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgnome_mplayer_properties_page_so-nautilus_property_page.Po@am__quote@
@@ -768,6 +858,34 @@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(COMPILE) -c `$(CYGPATH_W) '$<'`
 
+libgnome_mplayer_caja_properties_page_so-caja_property_page.o: caja_property_page.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -MT libgnome_mplayer_caja_properties_page_so-caja_property_page.o -MD -MP -MF $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Tpo -c -o libgnome_mplayer_caja_properties_page_so-caja_property_page.o `test -f 'caja_property_page.c' || echo '$(srcdir)/'`caja_property_page.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Tpo $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='caja_property_page.c' object='libgnome_mplayer_caja_properties_page_so-caja_property_page.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -c -o libgnome_mplayer_caja_properties_page_so-caja_property_page.o `test -f 'caja_property_page.c' || echo '$(srcdir)/'`caja_property_page.c
+
+libgnome_mplayer_caja_properties_page_so-caja_property_page.obj: caja_property_page.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -MT libgnome_mplayer_caja_properties_page_so-caja_property_page.obj -MD -MP -MF $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Tpo -c -o libgnome_mplayer_caja_properties_page_so-caja_property_page.obj `if test -f 'caja_property_page.c'; then $(CYGPATH_W) 'caja_property_page.c'; else $(CYGPATH_W) '$(srcdir)/caja_property_page.c'; fi`
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Tpo $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-caja_property_page.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='caja_property_page.c' object='libgnome_mplayer_caja_properties_page_so-caja_property_page.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -c -o libgnome_mplayer_caja_properties_page_so-caja_property_page.obj `if test -f 'caja_property_page.c'; then $(CYGPATH_W) 'caja_property_page.c'; else $(CYGPATH_W) '$(srcdir)/caja_property_page.c'; fi`
+
+libgnome_mplayer_caja_properties_page_so-property_page_common.o: property_page_common.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -MT libgnome_mplayer_caja_properties_page_so-property_page_common.o -MD -MP -MF $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Tpo -c -o libgnome_mplayer_caja_properties_page_so-property_page_common.o `test -f 'property_page_common.c' || echo '$(srcdir)/'`property_page_common.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Tpo $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='property_page_common.c' object='libgnome_mplayer_caja_properties_page_so-property_page_common.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -c -o libgnome_mplayer_caja_properties_page_so-property_page_common.o `test -f 'property_page_common.c' || echo '$(srcdir)/'`property_page_common.c
+
+libgnome_mplayer_caja_properties_page_so-property_page_common.obj: property_page_common.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -MT libgnome_mplayer_caja_properties_page_so-property_page_common.obj -MD -MP -MF $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Tpo -c -o libgnome_mplayer_caja_properties_page_so-property_page_common.obj `if test -f 'property_page_common.c'; then $(CYGPATH_W) 'property_page_common.c'; else $(CYGPATH_W) '$(srcdir)/property_page_common.c'; fi`
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Tpo $(DEPDIR)/libgnome_mplayer_caja_properties_page_so-property_page_common.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='property_page_common.c' object='libgnome_mplayer_caja_properties_page_so-property_page_common.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_caja_properties_page_so_CFLAGS) $(CFLAGS) -c -o libgnome_mplayer_caja_properties_page_so-property_page_common.obj `if test -f 'property_page_common.c'; then $(CYGPATH_W) 'property_page_common.c'; else $(CYGPATH_W) '$(srcdir)/property_page_common.c'; fi`
+
 libgnome_mplayer_nemo_properties_page_so-nemo_property_page.o: nemo_property_page.c
 @am__fastdepCC_TRUE@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgnome_mplayer_nemo_properties_page_so_CFLAGS) $(CFLAGS) -MT libgnome_mplayer_nemo_properties_page_so-nemo_property_page.o -MD -MP -MF $(DEPDIR)/libgnome_mplayer_nemo_properties_page_so-nemo_property_page.Tpo -c -o libgnome_mplayer_nemo_properties_page_so-nemo_property_page.o `test -f 'nemo_property_page.c' || echo '$(srcdir)/'`nemo_property_page.c
 @am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libgnome_mplayer_nemo_properties_page_so-nemo_property_page.Tpo $(DEPDIR)/libgnome_mplayer_nemo_properties_page_so-nemo_property_page.Po
@@ -983,7 +1101,7 @@
 all-am: Makefile $(PROGRAMS)
 installdirs: installdirs-recursive
 installdirs-am:
-	for dir in "$(DESTDIR)$(bindir)" "$(DESTDIR)$(nautilusdir)" "$(DESTDIR)$(nemodir)"; do \
+	for dir in "$(DESTDIR)$(bindir)" "$(DESTDIR)$(cajadir)" "$(DESTDIR)$(nautilusdir)" "$(DESTDIR)$(nemodir)"; do \
 	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
 	done
 install: install-recursive
@@ -1018,8 +1136,8 @@
 	@echo "it deletes files that may require special tools to rebuild."
 clean: clean-recursive
 
-clean-am: clean-binPROGRAMS clean-generic clean-nautilusPROGRAMS \
-	clean-nemoPROGRAMS mostlyclean-am
+clean-am: clean-binPROGRAMS clean-cajaPROGRAMS clean-generic \
+	clean-nautilusPROGRAMS clean-nemoPROGRAMS mostlyclean-am
 
 distclean: distclean-recursive
 	-rm -rf ./$(DEPDIR)
@@ -1039,7 +1157,8 @@
 
 info-am:
 
-install-data-am: install-nautilusPROGRAMS install-nemoPROGRAMS
+install-data-am: install-cajaPROGRAMS install-nautilusPROGRAMS \
+	install-nemoPROGRAMS
 
 install-dvi: install-dvi-recursive
 
@@ -1084,26 +1203,27 @@
 
 ps-am:
 
-uninstall-am: uninstall-binPROGRAMS uninstall-nautilusPROGRAMS \
-	uninstall-nemoPROGRAMS
+uninstall-am: uninstall-binPROGRAMS uninstall-cajaPROGRAMS \
+	uninstall-nautilusPROGRAMS uninstall-nemoPROGRAMS
 
 .MAKE: $(am__recursive_targets) install-am install-strip
 
 .PHONY: $(am__recursive_targets) CTAGS GTAGS TAGS all all-am check \
-	check-am clean clean-binPROGRAMS clean-generic \
-	clean-nautilusPROGRAMS clean-nemoPROGRAMS cscopelist-am ctags \
-	ctags-am distclean distclean-compile distclean-generic \
-	distclean-tags distdir dvi dvi-am html html-am info info-am \
-	install install-am install-binPROGRAMS install-data \
-	install-data-am install-dvi install-dvi-am install-exec \
-	install-exec-am install-html install-html-am install-info \
-	install-info-am install-man install-nautilusPROGRAMS \
-	install-nemoPROGRAMS install-pdf install-pdf-am install-ps \
-	install-ps-am install-strip installcheck installcheck-am \
-	installdirs installdirs-am maintainer-clean \
-	maintainer-clean-generic mostlyclean mostlyclean-compile \
-	mostlyclean-generic pdf pdf-am ps ps-am tags tags-am uninstall \
-	uninstall-am uninstall-binPROGRAMS uninstall-nautilusPROGRAMS \
+	check-am clean clean-binPROGRAMS clean-cajaPROGRAMS \
+	clean-generic clean-nautilusPROGRAMS clean-nemoPROGRAMS \
+	cscopelist-am ctags ctags-am distclean distclean-compile \
+	distclean-generic distclean-tags distdir dvi dvi-am html \
+	html-am info info-am install install-am install-binPROGRAMS \
+	install-cajaPROGRAMS install-data install-data-am install-dvi \
+	install-dvi-am install-exec install-exec-am install-html \
+	install-html-am install-info install-info-am install-man \
+	install-nautilusPROGRAMS install-nemoPROGRAMS install-pdf \
+	install-pdf-am install-ps install-ps-am install-strip \
+	installcheck installcheck-am installdirs installdirs-am \
+	maintainer-clean maintainer-clean-generic mostlyclean \
+	mostlyclean-compile mostlyclean-generic pdf pdf-am ps ps-am \
+	tags tags-am uninstall uninstall-am uninstall-binPROGRAMS \
+	uninstall-cajaPROGRAMS uninstall-nautilusPROGRAMS \
 	uninstall-nemoPROGRAMS
 
 
